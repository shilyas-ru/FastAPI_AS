Прежде, чем создавать миграции, проверить, что в файле `\src\migration\env.py` 
добавлен код с новыми моделями.<br>
Например, добавили в файл `\src\models\rooms.py` модель `RoomsORM`, значит в 
файл `\src\migration\env.py` надо добавить код:
```python
from src.models.rooms import RoomsORM
```

Создание миграций в рамках проекта (для отелей, для комнат, для пользователей):

```
alembic revision --autogenerate -m "001 Create table hotels"
alembic revision --autogenerate -m "002 Create rooms hotels"
alembic revision --autogenerate -m "003 Add users"
alembic revision --autogenerate -m "004 Make email unique"
```

Затем применяем миграции все не обработанные миграции:

```
alembic upgrade head
```

Иные варианты применения - см. ниже в разделе "Применение миграций".


### Справка

О всей команде в целом:

```commandline
alembic -h
```

О конкретном параметре

```commandline
alembic revision -h
```

### Создаём миграции

Автоматическая генерация миграции базы данных

```commandline
alembic revision --autogenerate -m "Initial revision"
```
Общее описание команды

- `alembic revision`: Это команда Alembic для создания новой ревизии (миграции) базы данных.
- `--autogenerate`: Флаг, который указывает Alembic автоматически сгенерировать 
миграцию на основе изменений в моделях SQLAlchemy и текущей структуре базы данных.
- `-m "Initial revision"`: Опция `-m` используется для добавления сообщения о миграции. 
В данном случае сообщение `"Initial revision"` указывает на то, что это первая 
(начальная) миграция. Вы можете указать любое свое сообщение, но это надо делать осмысленно.

Зачем используется флаг `--autogenerate`

- Автоматическое создание миграций:<br>
Флаг `--autogenerate` позволяет Alembic анализировать текущее состояние базы данных 
и сравнивать его с определениями моделей SQLAlchemy. На основе этих сравнений Alembic 
генерирует код миграции, который включает изменения структуры базы данных 
(такие как создание новых таблиц, изменение существующих столбцов и т.д.).

- Упрощение процесса:<br>
Автоматическая генерация миграций с флагом `--autogenerate` упрощает процесс 
управления изменениями в базе данных, особенно когда ваши модели данных SQLAlchemy 
изменяются. Это позволяет избежать ручного написания сложных SQL-запросов для 
каждого изменения.

### Применение миграций

Предположим, сделаны миграции:

```
aaa <-- head
bbb
ccc
ddd
fff <-- base
```
То есть, если смотреть по номерам миграций, то самая первая 
миграция - `fff`, самая последняя - `aaa`.

Самая первая миграция так же может именоваться - `base`, самая последняя - `head`. 

К миграциям можно обращаться по номеру версии: `ccc`

Можно делать сдвижку относитально указанной миграции, как 
вверх (`ccc+1`), так и вниз (`ccc-1`).

Если миграция не указана, а используется относительное перемещение 
(вверх `+1` и вниз `-1`), то отсчёт производится от текущей миграции.

Применяет все миграции, которые ещё не были применены к 
базе данных (в примере применяются миграции до `aaa` включительно).

Варианты применения:

```commandline
alembic upgrade head
alembic upgrade +1
alembic upgrade bbb
alembic upgrade ccc-1
alembic upgrade base+3
```

Откат миграций. 

Варианты:

```commandline
alembic downgrade -1
alembic downgrade bbb-1
alembic upgrade ccc
alembic downgrade base
alembic upgrade head-1
```


Откат всех миграций до первой
```commandline
alembic downgrade base
```

Откатывает базу данных на один уровень до предыдущей миграции.

```commandline
alembic downgrade -1
```

   Для отката к определенной версии используйте:
```commandline
alembic downgrade версия
```

### Проверка текущей версии базы данных 
   Показывает текущую версию миграций в базе данных.

```commandline
alembic current
```

### Просмотр истории миграций
   Показывает список всех миграций, которые были выполнены.

```commandline
alembic history
```

### Генерация миграции на основе изменений в моделях
   Автоматически создает миграцию на основе изменений в ваших моделях SQLAlchemy.

```commandline
alembic revision --autogenerate -m "описание миграции"
```

### Применение миграций к конкретной версии  
   Позволяет применить миграцию до указанный версии.

```commandline
alembic upgrade версия_миграции
```

### Сравнение текущего состояния базы данных с моделями
   Выводит различия между текущим состоянием базы данных и моделями.

```commandline
alembic revision --autogenerate -m "сравнение"
```

### Получение дополнительной информации
   Вы можете использовать опцию -h или --help для получения информации по командам Alembic.

```commandline
alembic -h
```

### Установка версии миграции
   Позволяет установить конкретную версию миграции без её применения.

```commandline
alembic stamp версия_миграции
```

